<div class="col-md-4 left-sidebar" ng-controller="TechNodeCtrl">
  <form>
    <div class="form-group" ng-controller="SearchCtrl">
      <input class="form-control search-room-input" ng-model="key" ng-change="filterRoom()" placeholder="Search room"></input>
    </div>
  </form>
  <div class="list-group room-list">
    <div class="list-group-item room-item {{(room.name == selectedRoom.name ? 'in' : '')}}" ng-repeat="room in rooms" ng-show="!room.hide" ng-click="changeSelectedRoom(room)">
      <h4>{{room.name}}<span class="badge pull-right">{{room.users.length}}</span></h4>
      <div class="avatar-list">
          <span ng-repeat="user in room.users" title="{{user.name}}">
            <img alt="{{user.email}}" src="{{user.avatar}}" class="img-rounded"/>
          </span>
      </div>
    </div>
  </div>
  <div class="add-room-panel" ng-controller="RoomCreatorCtrl">
    <p class="clearfix" ng-show="!isShow">
      <button type="button" class="btn btn-link" ng-click="toggleCreator()"><span class="glyphicon glyphicon-plus"></span> Add room</button>
    </p>
    <form class="form-inline" ng-show="isShow" ng-submit="createRoom()">
      <div class="form-group">
        <label class="sr-only">room name</label>
        <input type="input" required class="form-control" ng-model="roomName" placeholder="Enter room name">
      </div>
      <button type="submit" class="btn btn-primary">Create</button>
      <button type="button" class="btn btn-link" ng-click="toggleCreator()">Cancel</button>
    </form>
  </div>
</div>

<div class="col-md-8">
  <div class="panel panel-default room">
    <div class="panel-heading room-header">{{selectedRoom.name}}</div>
    <div class="panel-body">
      <div class="timeline">
        <div class="list-group" auto-scroll-to-bottom>
          <div class="list-group-item message clearfix {{message.creator.name == userMe.name ? 'me': ''}}" ng-repeat="message in selectedRoom.messages">
            <img alt="{{message.creator.name}}"src="{{message.creator.avatar}}" class="">
            <div class="trangle"></div>
            <div class="message-body" markdown emojify>{{message.content}}</div>
          </div>
        </div>
      </div>
      <form class="form-inline message-creator" ng-submit="sendMessage()">
        <div class="form-group">
          <textarea required class="form-control message-input" ng-model="message"  placeholder="Ctrl+Enter to quick send" ctrl-enter-break-line="sendMessage()"></textarea>
        </div>
        <button type="submit" class="btn btn-success btn-send">send</button>
      </form>
    </div>
  </div>
</div>
